<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTS - Sistema de Gesti√≥n</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
</head>
<body>
    <div class="container">
        <!-- Header con tu logo -->
        <div class="header">
            <div class="logo-section">
                <img src="images/nts-logo.png" alt="NTS Logo" class="logo">
                <div class="company-info">
                    <h1>NTS</h1>
                    <p>NIEVA TRAVEL SERVICES</p>
                    <span class="subtitle">Sistema de Gesti√≥n de Ventas</span>
                </div>
            </div>
        </div>

        <!-- Navegaci√≥n por pesta√±as -->
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('dashboard')">
                üìä Dashboard
            </button>
            <button class="tab-button" onclick="showTab('nueva-venta')">
                ‚ûï Nueva Venta
            </button>
            <button class="tab-button" onclick="showTab('ventas')">
                üìã Ventas
            </button>
            <button class="tab-button" onclick="showTab('clientes')">
                üë• Clientes
            </button>
            <button class="tab-button" onclick="showTab('reportes')">
                üìà Reportes
            </button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-info">
                        <h3>Ventas del Mes</h3>
                        <p class="stat-value" id="ventas-mes">$0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-info">
                        <h3>Ventas Totales</h3>
                        <p class="stat-value" id="ventas-total">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚è≥</div>
                    <div class="stat-info">
                        <h3>Pendientes de Pago</h3>
                        <p class="stat-value" id="pendientes">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-info">
                        <h3>Clientes</h3>
                        <p class="stat-value" id="total-clientes">0</p>
                    </div>
                </div>
            </div>

            <div class="recent-sales">
                <h3>üïí Ventas Recientes</h3>
                <div id="ventas-recientes" class="sales-list">
                    <!-- Las ventas se cargan din√°micamente -->
                </div>
            </div>
        </div>

        <!-- Reemplaza la secci√≥n "Nueva Venta" en tu index.html con esto: -->

<!-- Nueva Venta -->
<div id="nueva-venta" class="tab-content">
    <div class="form-container">
        <h3>‚úàÔ∏è Crear Nueva Venta</h3>
        
        <!-- Informaci√≥n del Cliente -->
        <div class="form-section">
            <h4>üë§ Informaci√≥n del Cliente</h4>
            <div class="form-row">
                <div>
                    <label for="cliente-nombre">Nombre Completo *</label>
                    <input type="text" id="cliente-nombre" placeholder="Ej: Juan P√©rez" required>
                    <small>üí° Escriba para buscar clientes existentes</small>
                </div>
                <div>
                    <label for="cliente-email">Email</label>
                    <input type="email" id="cliente-email" placeholder="cliente@email.com">
                </div>
            </div>
            <div class="form-row">
                <div>
                    <label for="cliente-telefono">Tel√©fono</label>
                    <input type="tel" id="cliente-telefono" placeholder="+54 9 11 1234-5678">
                </div>
                <div>
                    <label for="cliente-documento">DNI/Pasaporte</label>
                    <input type="text" id="cliente-documento" placeholder="12345678">
                </div>
            </div>
            <!-- El select de vendedor se agrega autom√°ticamente por JS -->
        </div>

        <!-- Informaci√≥n de la Venta -->
        <div class="form-section">
            <h4>üìã Informaci√≥n del Viaje</h4>
            <div class="form-row">
                <div>
                    <label for="fecha-viaje-inicio">Fecha de Inicio del Viaje *</label>
                    <input type="date" id="fecha-viaje-inicio" required>
                </div>
                <div>
                    <label for="fecha-viaje-fin">Fecha de Fin del Viaje</label>
                    <input type="date" id="fecha-viaje-fin">
                </div>
            </div>
            <div>
                <label for="observaciones-venta">Observaciones del Viaje</label>
                <textarea id="observaciones-venta" placeholder="Detalles especiales, notas importantes, comentarios del cliente..."></textarea>
            </div>
        </div>

        <!-- Servicios -->
        <div class="form-section">
            <h4>üéØ Agregar Servicios al Viaje</h4>
            <div class="service-tabs">
                <button type="button" class="service-tab active" onclick="showServiceTab('vuelo')">‚úàÔ∏è Vuelos</button>
                <button type="button" class="service-tab" onclick="showServiceTab('hotel')">üè® Hoteles</button>
                <button type="button" class="service-tab" onclick="showServiceTab('traslado')">üöå Traslados</button>
                <button type="button" class="service-tab" onclick="showServiceTab('excursion')">üó∫Ô∏è Excursiones</button>
            </div>

            <!-- Formulario Vuelos MEJORADO -->
            <div id="service-vuelo" class="service-form active">
                <div class="form-row">
                    <div>
                        <label for="vuelo-descripcion">Descripci√≥n del Vuelo *</label>
                        <input type="text" id="vuelo-descripcion" placeholder="Ej: Buenos Aires - Miami ida y vuelta">
                    </div>
                    <div>
                        <label for="vuelo-tipo">Tipo de Itinerario</label>
                        <select id="vuelo-tipo">
                            <option value="ida">Solo Ida</option>
                            <option value="ida_vuelta" selected>Ida y Vuelta</option>
                            <option value="multitramo">Multitramo</option>
                            <option value="stopover">Stopover</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="vuelo-origen">Origen</label>
                        <input type="text" id="vuelo-origen" placeholder="Buenos Aires (BUE)">
                    </div>
                    <div>
                        <label for="vuelo-destino">Destino</label>
                        <input type="text" id="vuelo-destino" placeholder="Miami (MIA)">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="vuelo-fecha-salida">Fecha de Salida</label>
                        <input type="date" id="vuelo-fecha-salida">
                    </div>
                    <div>
                        <label for="vuelo-aerolinea">Aerol√≠nea</label>
                        <input type="text" id="vuelo-aerolinea" placeholder="American Airlines">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega autom√°ticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="vuelo-precio">Precio de Venta *</label>
                        <input type="number" id="vuelo-precio" placeholder="1500" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="vuelo-pasajeros">Cantidad de Pasajeros</label>
                        <input type="number" id="vuelo-pasajeros" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="vuelo">‚ûï Agregar Vuelo</button>
            </div>

            <!-- Formulario Hoteles MEJORADO -->
            <div id="service-hotel" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="hotel-nombre">Nombre del Hotel *</label>
                        <input type="text" id="hotel-nombre" placeholder="Hotel Fontainebleau">
                    </div>
                    <div>
                        <label for="hotel-ciudad">Ciudad</label>
                        <input type="text" id="hotel-ciudad" placeholder="Miami Beach">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="hotel-checkin">Check-in *</label>
                        <input type="date" id="hotel-checkin">
                    </div>
                    <div>
                        <label for="hotel-checkout">Check-out *</label>
                        <input type="date" id="hotel-checkout">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega autom√°ticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="hotel-precio">Precio Total de Estad√≠a *</label>
                        <input type="number" id="hotel-precio" placeholder="800" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="hotel-huespedes">Cantidad de Hu√©spedes</label>
                        <input type="number" id="hotel-huespedes" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="hotel">‚ûï Agregar Hotel</button>
            </div>

            <!-- Formulario Traslados MEJORADO -->
            <div id="service-traslado" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="traslado-origen">Origen *</label>
                        <input type="text" id="traslado-origen" placeholder="Aeropuerto Internacional">
                    </div>
                    <div>
                        <label for="traslado-destino">Destino *</label>
                        <input type="text" id="traslado-destino" placeholder="Hotel Fontainebleau">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="traslado-fecha">Fecha del Traslado</label>
                        <input type="date" id="traslado-fecha">
                    </div>
                    <div>
                        <label for="traslado-hora">Hora Estimada</label>
                        <input type="time" id="traslado-hora">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega autom√°ticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="traslado-precio">Precio del Traslado *</label>
                        <input type="number" id="traslado-precio" placeholder="80" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="traslado-pasajeros">Cantidad de Pasajeros</label>
                        <input type="number" id="traslado-pasajeros" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="traslado">‚ûï Agregar Traslado</button>
            </div>

            <!-- Formulario Excursiones MEJORADO -->
            <div id="service-excursion" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="excursion-nombre">Nombre de la Excursi√≥n *</label>
                        <input type="text" id="excursion-nombre" placeholder="Tour a Chichen Itz√°">
                    </div>
                    <div>
                        <label for="excursion-fecha">Fecha de la Excursi√≥n</label>
                        <input type="date" id="excursion-fecha">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="excursion-destino">Lugar de Destino</label>
                        <input type="text" id="excursion-destino" placeholder="Chichen Itz√°, Yucat√°n">
                    </div>
                    <div>
                        <label for="excursion-duracion">Duraci√≥n (horas)</label>
                        <input type="number" id="excursion-duracion" placeholder="8" min="1">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega autom√°ticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="excursion-precio">Precio de la Excursi√≥n *</label>
                        <input type="number" id="excursion-precio" placeholder="470" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="excursion-participantes">Cantidad de Participantes</label>
                        <input type="number" id="excursion-participantes" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <div class="form-row">
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="excursion-almuerzo"> Incluye Almuerzo
                        </label>
                    </div>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="excursion-transporte"> Incluye Transporte
                        </label>
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="excursion">‚ûï Agregar Excursi√≥n</button>
            </div>
        </div>

        <!-- Servicios Agregados -->
        <div class="form-section">
            <h4>üìù Servicios Agregados al Viaje</h4>
            <div id="servicios-lista" class="services-list">
                <p class="no-services">No hay servicios agregados</p>
            </div>
            <div class="total-section">
                <p class="total-amount">Total: $<span id="total-venta">0</span></p>
            </div>
        </div>

        <!-- Botones de Acci√≥n -->
        <div class="form-actions">
            <button type="button" onclick="limpiarFormulario()" class="btn-secondary">üóëÔ∏è Limpiar Todo</button>
            <button type="button" onclick="crearVenta()" class="btn-primary">üíæ Crear Venta</button>
        </div>
    </div>
</div>

        <!-- Lista de Ventas -->
        <div id="ventas" class="tab-content">
            <div class="section-header">
                <h3>üìã Gesti√≥n de Ventas</h3>
                <div class="filters">
                    <input type="text" id="buscar-venta" placeholder="üîç Buscar por cliente o n√∫mero..." onkeyup="filtrarVentas()">
                    <select id="filtro-estado" onchange="filtrarVentas()">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="confirmada">Confirmada</option>
                        <option value="pagada">Pagada</option>
                        <option value="cancelada">Cancelada</option>
                    </select>
                </div>
            </div>
            <div id="lista-ventas" class="ventas-grid">
                <!-- Las ventas se cargan din√°micamente -->
            </div>
        </div>

        <!-- Clientes -->
        <div id="clientes" class="tab-content">
            <div class="section-header">
                <h3>üë• Gesti√≥n de Clientes</h3>
                <button onclick="mostrarFormularioCliente()" class="btn-primary">‚ûï Nuevo Cliente</button>
            </div>
            <div id="lista-clientes" class="clientes-grid">
                <!-- Los clientes se cargan din√°micamente -->
            </div>
        </div>

        <!-- Reportes -->
        <div id="reportes" class="tab-content">
            <div class="section-header">
                <h3>üìà Reportes y Estad√≠sticas</h3>
            </div>
            <div class="reportes-grid">
                <div class="reporte-card">
                    <h4>üí∞ Ventas por Mes</h4>
                    <canvas id="chart-ventas-mes"></canvas>
                </div>
                <div class="reporte-card">
                    <h4>üéØ Servicios M√°s Vendidos</h4>
                    <canvas id="chart-servicios"></canvas>
                </div>
                <div class="reporte-card">
                    <h4>üìä Estado de Pagos</h4>
                    <div id="estado-pagos" class="payment-stats">
                        <!-- Estad√≠sticas de pagos -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de venta -->
    <div id="modal-detalle" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <div id="detalle-venta-content">
                <!-- Contenido del detalle se carga din√°micamente -->
            </div>
        </div>
    </div>

    <!-- SCRIPTS EN ORDEN CORRECTO -->
    <!-- 1. Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- 2. Archivos de configuraci√≥n (PRIMERO) -->
    <script src="js/config.js"></script>
    
    <!-- 3. Utilidades (SEGUNDO) -->
    <script src="js/utils.js"></script>
    
    <!-- 4. Aplicaci√≥n principal (TERCERO) -->
    <script src="js/app.js"></script>

</body>
</html>
