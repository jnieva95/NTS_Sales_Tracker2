<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTS - Sistema de Gestión</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

<!-- Flatpickr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<!-- Flatpickr Theme (opcional - tema más bonito) -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css">

<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header con tu logo -->
        <div class="header">
            <div class="logo-section">
                <img src="images/nts-logo.png" alt="NTS Logo" class="logo">
                <div class="company-info">
                    <h1>NTS</h1>
                    <p>NIEVA TRAVEL SERVICES</p>
                    <span class="subtitle">Sistema de Gestión de Ventas</span>
                </div>
            </div>
        </div>

        <!-- Navegación por pestañas -->
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('dashboard')">
                📊 Dashboard
            </button>
            <button class="tab-button" onclick="showTab('nueva-venta')">
                ➕ Nueva Venta
            </button>
            <button class="tab-button" onclick="showTab('ventas')">
                📋 Ventas
            </button>
            <button class="tab-button" onclick="showTab('clientes')">
                👥 Clientes
            </button>
            <button class="tab-button" onclick="showTab('reportes')">
                📈 Reportes
            </button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">💰</div>
                    <div class="stat-info">
                        <h3>Ventas del Mes</h3>
                        <p class="stat-value" id="ventas-mes">$0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📊</div>
                    <div class="stat-info">
                        <h3>Ventas Totales</h3>
                        <p class="stat-value" id="ventas-total">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">⏳</div>
                    <div class="stat-info">
                        <h3>Pendientes de Pago</h3>
                        <p class="stat-value" id="pendientes">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-info">
                        <h3>Clientes</h3>
                        <p class="stat-value" id="total-clientes">0</p>
                    </div>
                </div>
            </div>

            <div class="recent-sales">
                <h3>🕒 Ventas Recientes</h3>
                <div id="ventas-recientes" class="sales-list">
                    <!-- Las ventas se cargan dinámicamente -->
                </div>
            </div>
        </div>

        <!-- Reemplaza la sección "Nueva Venta" en tu index.html con esto: -->

<!-- Nueva Venta -->
<div id="nueva-venta" class="tab-content">
    <div class="form-container">
        <h3>✈️ Crear Nueva Venta</h3>
        
        <!-- Información del Cliente -->
        <div class="form-section">
            <h4>👤 Información del Cliente</h4>
            <div class="form-row">
                <div>
                    <label for="cliente-nombre">Nombre Completo *</label>
                    <input type="text" id="cliente-nombre" placeholder="Ej: Juan Pérez" required>
                    <small>💡 Escriba para buscar clientes existentes</small>
                </div>
                <div>
                    <label for="cliente-email">Email</label>
                    <input type="email" id="cliente-email" placeholder="cliente@email.com">
                </div>
            </div>
            <div class="form-row">
                <div>
                    <label for="cliente-telefono">Teléfono</label>
                    <input type="tel" id="cliente-telefono" placeholder="+54 9 11 1234-5678">
                </div>
                <div>
                    <label for="cliente-documento">DNI/Pasaporte</label>
                    <input type="text" id="cliente-documento" placeholder="12345678">
                </div>
            </div>
            <!-- El select de vendedor se agrega automáticamente por JS -->
        </div>

        <!-- Información de la Venta -->
        <div class="form-section">
            <h4>📋 Información del Viaje</h4>
            <div class="form-row">
                <div>
                    <label for="fecha-viaje-inicio">Fecha de Inicio del Viaje *</label>
                    <input type="date" id="fecha-viaje-inicio" required>
                </div>
                <div>
                    <label for="fecha-viaje-fin">Fecha de Fin del Viaje</label>
                    <input type="date" id="fecha-viaje-fin">
                </div>
            </div>
            <div>
                <label for="observaciones-venta">Observaciones del Viaje</label>
                <textarea id="observaciones-venta" placeholder="Detalles especiales, notas importantes, comentarios del cliente..."></textarea>
            </div>
        </div>

        <!-- Servicios -->
        <div class="form-section">
            <h4>🎯 Agregar Servicios al Viaje</h4>
            <div class="service-tabs">
                <button type="button" class="service-tab active" onclick="showServiceTab('vuelo')">✈️ Vuelos</button>
                <button type="button" class="service-tab" onclick="showServiceTab('hotel')">🏨 Hoteles</button>
                <button type="button" class="service-tab" onclick="showServiceTab('traslado')">🚌 Traslados</button>
                <button type="button" class="service-tab" onclick="showServiceTab('excursion')">🗺️ Excursiones</button>
            </div>
<!-- 📍 BUSCA ESTA SECCIÓN EN TU INDEX.HTML Y REEMPLÁZALA COMPLETA -->

<!-- ✈️ FORMULARIO VUELOS - SUPER LIMPIO SIN CAMPOS DE FECHA -->
<div id="service-vuelo" class="service-form active">
    <div class="form-row">
        <div>
            <label for="vuelo-origen"><strong>🛫 Origen *</strong></label>
            <input type="text" id="vuelo-origen" placeholder="Buenos Aires (BUE)" required>
            <small>Ciudad o aeropuerto de origen</small>
        </div>
        <div>
            <label for="vuelo-destino"><strong>🛬 Destino *</strong></label>
            <input type="text" id="vuelo-destino" placeholder="Miami (MIA)" required>
            <small>Ciudad o aeropuerto de destino</small>
        </div>
    </div>
    
    <div class="form-row">
        <div>
            <label for="vuelo-tipo"><strong>📋 Tipo de Itinerario</strong></label>
            <select id="vuelo-tipo">
                <option value="ida">Solo Ida</option>
                <option value="ida_vuelta" selected>Ida y Vuelta</option>
                <option value="multitramo">Multitramo</option>
                <option value="stopover">Stopover</option>
            </select>
            <small>Seleccione el tipo de viaje</small>
        </div>
        <div>
            <label for="vuelo-descripcion"><strong>📝 Descripción</strong></label>
            <input type="text" id="vuelo-descripcion" placeholder="Se completa automáticamente...">
            <small>💡 Se genera automáticamente cuando completes origen y destino</small>
        </div>
    </div>
    
    <!-- AQUÍ JS VA A INSERTAR LOS CAMPOS DE FECHA DINÁMICAMENTE -->
    <!-- NO AGREGAR NADA DE FECHAS AQUÍ -->
    
    <div class="form-row">
        <div>
            <label for="vuelo-aerolinea"><strong>✈️ Aerolínea</strong></label>
            <input type="text" id="vuelo-aerolinea" placeholder="American Airlines">
            <small>Nombre de la aerolínea</small>
        </div>
        <div>
            <label for="vuelo-clase"><strong>💺 Clase de Vuelo</strong></label>
            <select id="vuelo-clase">
                <option value="economica">Económica</option>
                <option value="premium_economy">Premium Economy</option>
                <option value="business">Business</option>
                <option value="primera_clase">Primera Clase</option>
            </select>
            <small>Clase del boleto</small>
        </div>
    </div>
    
    <div class="form-row">
        <div>
            <label for="vuelo-precio"><strong>💰 Precio de Venta *</strong></label>
            <input type="number" id="vuelo-precio" placeholder="1500" step="0.01" min="0" required>
            <small>Precio final al cliente</small>
        </div>
        <div>
            <label for="vuelo-pasajeros"><strong>👥 Cantidad de Pasajeros</strong></label>
            <input type="number" id="vuelo-pasajeros" placeholder="2" min="1" value="2">
            <small>Número total de pasajeros</small>
        </div>
    </div>
    
    <button type="button" class="btn-add-service" data-service="vuelo">➕ Agregar Vuelo</button>
</div>
            <!-- Formulario Hoteles MEJORADO -->
            <div id="service-hotel" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="hotel-nombre">Nombre del Hotel *</label>
                        <input type="text" id="hotel-nombre" placeholder="Hotel Fontainebleau">
                    </div>
                    <div>
                        <label for="hotel-ciudad">Ciudad</label>
                        <input type="text" id="hotel-ciudad" placeholder="Miami Beach">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="hotel-checkin">Check-in *</label>
                        <input type="date" id="hotel-checkin">
                    </div>
                    <div>
                        <label for="hotel-checkout">Check-out *</label>
                        <input type="date" id="hotel-checkout">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega automáticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="hotel-precio">Precio Total de Estadía *</label>
                        <input type="number" id="hotel-precio" placeholder="800" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="hotel-huespedes">Cantidad de Huéspedes</label>
                        <input type="number" id="hotel-huespedes" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="hotel">➕ Agregar Hotel</button>
            </div>

            <!-- Formulario Traslados MEJORADO -->
            <div id="service-traslado" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="traslado-origen">Origen *</label>
                        <input type="text" id="traslado-origen" placeholder="Aeropuerto Internacional">
                    </div>
                    <div>
                        <label for="traslado-destino">Destino *</label>
                        <input type="text" id="traslado-destino" placeholder="Hotel Fontainebleau">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="traslado-fecha">Fecha del Traslado</label>
                        <input type="date" id="traslado-fecha">
                    </div>
                    <div>
                        <label for="traslado-hora">Hora Estimada</label>
                        <input type="time" id="traslado-hora">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega automáticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="traslado-precio">Precio del Traslado *</label>
                        <input type="number" id="traslado-precio" placeholder="80" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="traslado-pasajeros">Cantidad de Pasajeros</label>
                        <input type="number" id="traslado-pasajeros" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="traslado">➕ Agregar Traslado</button>
            </div>

            <!-- Formulario Excursiones MEJORADO -->
            <div id="service-excursion" class="service-form">
                <div class="form-row">
                    <div>
                        <label for="excursion-nombre">Nombre de la Excursión *</label>
                        <input type="text" id="excursion-nombre" placeholder="Tour a Chichen Itzá">
                    </div>
                    <div>
                        <label for="excursion-fecha">Fecha de la Excursión</label>
                        <input type="date" id="excursion-fecha">
                    </div>
                </div>
                <div class="form-row">
                    <div>
                        <label for="excursion-destino">Lugar de Destino</label>
                        <input type="text" id="excursion-destino" placeholder="Chichen Itzá, Yucatán">
                    </div>
                    <div>
                        <label for="excursion-duracion">Duración (horas)</label>
                        <input type="number" id="excursion-duracion" placeholder="8" min="1">
                    </div>
                </div>
                <!-- Fila de proveedor y costos se agrega automáticamente por JS -->
                <div class="form-row">
                    <div>
                        <label for="excursion-precio">Precio de la Excursión *</label>
                        <input type="number" id="excursion-precio" placeholder="470" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="excursion-participantes">Cantidad de Participantes</label>
                        <input type="number" id="excursion-participantes" placeholder="2" min="1" value="2">
                    </div>
                </div>
                <div class="form-row">
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="excursion-almuerzo"> Incluye Almuerzo
                        </label>
                    </div>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="excursion-transporte"> Incluye Transporte
                        </label>
                    </div>
                </div>
                <button type="button" class="btn-add-service" data-service="excursion">➕ Agregar Excursión</button>
            </div>
        </div>

        <!-- Servicios Agregados -->
        <div class="form-section">
            <h4>📝 Servicios Agregados al Viaje</h4>
            <div id="servicios-lista" class="services-list">
                <p class="no-services">No hay servicios agregados</p>
            </div>
            <div class="total-section">
                <p class="total-amount">Total: $<span id="total-venta">0</span></p>
            </div>
        </div>

        <!-- Botones de Acción -->
        <div class="form-actions">
            <button type="button" onclick="limpiarFormulario()" class="btn-secondary">🗑️ Limpiar Todo</button>
            <button type="button" onclick="crearVenta()" class="btn-primary">💾 Crear Venta</button>
        </div>
    </div>
</div>

        <!-- Lista de Ventas -->
        <div id="ventas" class="tab-content">
            <div class="section-header">
                <h3>📋 Gestión de Ventas</h3>
                <div class="filters">
                    <input type="text" id="buscar-venta" placeholder="🔍 Buscar por cliente o número..." onkeyup="filtrarVentas()">
                    <select id="filtro-estado" onchange="filtrarVentas()">
                        <option value="">Todos los estados</option>
                        <option value="pendiente">Pendiente</option>
                        <option value="confirmada">Confirmada</option>
                        <option value="pagada">Pagada</option>
                        <option value="cancelada">Cancelada</option>
                    </select>
                </div>
            </div>
            <div id="lista-ventas" class="ventas-grid">
                <!-- Las ventas se cargan dinámicamente -->
            </div>
        </div>

        <!-- Clientes -->
        <div id="clientes" class="tab-content">
            <div class="section-header">
                <h3>👥 Gestión de Clientes</h3>
                <button onclick="mostrarFormularioCliente()" class="btn-primary">➕ Nuevo Cliente</button>
            </div>
            <div id="lista-clientes" class="clientes-grid">
                <!-- Los clientes se cargan dinámicamente -->
            </div>
        </div>

        <!-- Reportes -->
        <div id="reportes" class="tab-content">
            <div class="section-header">
                <h3>📈 Reportes y Estadísticas</h3>
            </div>
            <div class="reportes-grid">
                <div class="reporte-card">
                    <h4>💰 Ventas por Mes</h4>
                    <canvas id="chart-ventas-mes"></canvas>
                </div>
                <div class="reporte-card">
                    <h4>🎯 Servicios Más Vendidos</h4>
                    <canvas id="chart-servicios"></canvas>
                </div>
                <div class="reporte-card">
                    <h4>📊 Estado de Pagos</h4>
                    <div id="estado-pagos" class="payment-stats">
                        <!-- Estadísticas de pagos -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de venta -->
    <div id="modal-detalle" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModal()">&times;</span>
            <div id="detalle-venta-content">
                <!-- Contenido del detalle se carga dinámicamente -->
            </div>
        </div>
    </div>

   <!-- SCRIPTS EN ORDEN CORRECTO -->
<!-- 1. Supabase CDN (PRIMERO) -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<!-- 2. Configuración (SEGUNDO) -->
<script src="js/config.js"></script>

<!-- 3. Utilidades (TERCERO) - ¡IMPORTANTE! -->
<script src="js/utils.js"></script>

<!-- 4. Módulo de Ventas (CUARTO) -->
<script src="js/modules/ventas.js"></script>

<!-- 5. Aplicación principal (ÚLTIMO) -->
<script src="js/app.js"></script>

</body>
</html>

</body>
</html>
